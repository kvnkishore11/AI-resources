# CLAUDE.md

Guidance for Claude Code when working with this repository.

## Workflow

1. **Plan**: Read relevant code → Write plan to `projectplan.md` with todo checklist
2. **Verify**: Get approval before starting
3. **Execute**: Work through todos, mark complete, explain changes briefly
4. **Review**: Add summary to projectplan.md

## Core Principles

### Code Quality
- **Simplicity first** - minimal changes, smallest impact
- **No duplication** - check for existing functionality
- **Small files** - refactor at 200-300 lines
- **Clean patterns** - exhaust existing solutions before adding new ones

### Boundaries
- Only modify task-relevant code
- Never mock data for dev/prod (tests only)
- Ask before modifying .env
- Remove old implementations when replacing

## SOLID & OOP Quick Reference

### SOLID
- **S**ingle Responsibility - one reason to change
- **O**pen/Closed - extend without modifying
- **L**iskov Substitution - subclasses fully replaceable
- **I**nterface Segregation - small, focused interfaces
- **D**ependency Inversion - depend on abstractions

### OOP
- **Encapsulation**: Hide implementation, expose interfaces
- **Inheritance**: Only for "is-a" relationships (≤3 levels)
- **Polymorphism**: Common interfaces, different implementations
- **Abstraction**: Focus on "what" not "how"

## Test-Driven Development

1. Write comprehensive tests first (normal, edge, error cases)
2. Implement feature to pass tests
3. Achieve ≥90% code coverage
4. Automate testing for every new change/refactor/feature.

## Git Commits

### Format
```
<type>: <summary (50 chars)>

<what and why (72 char wrap)>
- Change 1
- Change 2

Fixes: #123
```

### Types
`feat` `fix` `docs` `style` `refactor` `perf` `test` `chore` `revert`

### Rules
- Imperative mood ("add" not "added")
- Explain WHAT and WHY, not HOW
- Add code comments matching commit intent

## Code Comments

```javascript
// [type] What and why

/* [type] Summary
 * Details if needed
 */
```

Place directly above changed code, align with commit messages.

## Remember
- Never use "Generated by Claude Code" in comments
- Never use "coauthored by Claude Code" in commits
- Focus on task scope only
- Test everything thoroughly
